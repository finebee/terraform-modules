tools:
- name: terraform-azure-apply-tool
  image: hashicorp/terraform              
  description: "Used to execute the 'terraform apply' command on Azure CLI."
  type: docker
  alias: ter-azure-apply
  content: |

      git clone -b "$BRANCH" https://"$PAT"@github.com/"$GIT_ORG"/"$GIT_REPO".git $DIR
      cd $DIR/aux/databricks/terraform/azure
      terraform apply \
      -var "databricks_account_id=${DB_ACCOUNT_ID}" \
      -var "databricks_client_id=${DB_ACCOUNT_CLIENT_ID}" \
      -var "databricks_client_secret=${DB_ACCOUNT_CLIENT_SECRET}"

  env:
    - "DB_ACCOUNT_ID"
    - "DB_ACCOUNT_CLIENT_ID"
    - "DB_ACCOUNT_CLIENT_SECRET"
    - "GIT_ORG"
    - "GIT_REPO"
    - "BRANCH"
    - "DIR"
    - "ARM_CLIENT_ID"
    - "ARM_CLIENT_SECRET"
    - "ARM_TENANT_ID"
    - "ARM_SUBSCRIPTION_ID"
    - "PAT"
