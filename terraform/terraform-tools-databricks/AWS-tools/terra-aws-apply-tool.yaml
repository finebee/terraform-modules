tools:
- name: terraform-aws-apply-tool
  image: hashicorp/terraform              
  description: "Used to execute the 'terraform apply' command on AWS."
  type: docker
  alias: ter-aws-apply
  content: |

      git clone -b "$BRANCH" https://"$PAT"@github.com/"$GIT_ORG"/"$GIT_REPO".git $DIR
      cd $DIR/aux/databricks/terraform/aws
      ls -la
      terraform init
      terraform apply \
      -var "databricks_account_id=${DB_ACCOUNT_ID}" \
      -var "databricks_client_id=${DB_ACCOUNT_CLIENT_ID}" \
      -var "databricks_client_secret=${DB_ACCOUNT_CLIENT_SECRET}"

  
  env:
    - "DB_ACCOUNT_ID"
    - "DB_ACCOUNT_CLIENT_ID"
    - "DB_ACCOUNT_CLIENT_SECRET"
    - "GIT_ORG"
    - "GIT_REPO"
    - "BRANCH"
    - "DIR"
    - "AWS_ACCESS_KEY_ID"
    - "AWS_SECRET_ACCESS_KEY"
    - "AWS_DEFAULT_REGION"
    - "PAT"
